<%- include('Partials/header') %>
<style>
  
  .post-wrapper {
  max-width: 900px;
  margin: 40px auto;
  padding: 0 16px;
}

.page-title {
  text-align: center;
  
  margin-bottom: 20px;
  font-size: 24px;
}

.post-card {
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.post-card label {
  display: block;
  font-weight: 600;
  margin: 14px 0 6px;
}

#titlepost {
  width: 100%;
  padding: 10px 12px;
  border-radius: 6px;
  border: 1px solid #ddd;
  font-size: 15px;
}

#editor {
  height: 300px;
  background: #fff;
  border-radius: 6px;
}

.btn-save {
  margin-top: 18px;
  background: #2563eb;
  color: #fff;
  border: none;
  padding: 10px 18px;
  font-size: 14px;
  border-radius: 6px;
  cursor: pointer;
}

.btn-save:hover {
  background: #1d4ed8;
}

/* Mobile */
@media (max-width: 600px) {
  #editor {
    height: 220px;
  }
}
</style>
<div class="post-wrapper">
  <h1 class="page-title">âž• Add New Post</h1>

  <div class="post-card">
    <label>Post Title</label>
    <input type="text" id="titlepost" placeholder="Enter post title">

    <label>Post Content</label>
    <div id="editor"></div>

    <button id="saveBtn" class="btn-save">ðŸ’¾ Save Post</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const quill = new Quill('#editor', {
    theme: 'snow',
    modules: {
      toolbar: {
        container: [
          ['bold','italic','underline','code-block'],
          [{ list: 'ordered' }, { list: 'bullet' }],
          ['image'],
          ['clean'],
          [{ color: [] }, { background: [] }]
        ]
      }
    }
  });

  document.getElementById("saveBtn").addEventListener("click", () => {
    const title = document.getElementById("titlepost").value.trim();
    const content = quill.root.innerHTML;

    if (!title || !content) {
      alert("Title or content missing");
      return;
    }

    fetch("/admin/savepost", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ title, content })
    })
    .then(res => res.json())
    .then(() => alert("Post saved successfully!"));
  });
});
</script>

<%- include('Partials/footer') %>